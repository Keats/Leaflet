<!DOCTYPE html>
<html>
<head>
	<title>Leaflet geolocation debug page</title>

	<link rel="stylesheet" href="../../dist/leaflet.css" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="../css/mobile.css" />
	<script src="../leaflet-include.js"></script>
</head>
<body>

	<div id="map"></div>

	<script type="text/javascript">

		var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
			osmAttrib = '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
			osm = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib});
		var kyiv = [50.5, 30.5],
			lnd = [51.51, -0.12],
			sf = [37.77, -122.42],
			dc = [38.91, -77.04],
			trd = [63.41, 10.41];

		var map = new L.Map('map', {
			zoom: 15,
			layers: [osm],
			rotate: true,
			touchRotate: true
		});

		var marker1 = L.marker(kyiv).addTo(map),
			marker2 = L.marker(lnd).addTo(map),
			marker3 = L.marker(dc).addTo(map),
			marker4 = L.marker(sf).addTo(map),
			marker5 = L.marker(trd).addTo(map);
		function logEvent(e) { console.log(e.type); }

		function resetHeading(ev) {

			console.log(ev);

			if (ev.heading !== null) {
				map.setBearing(ev.heading);
			}

		}

// 		map.on('locationerror', logEvent);
// 		map.on('locationfound', logEvent);
		map.on('locationfound', resetHeading);

		window.setInterval( function(){
			map.locate({
				setView: true,
				enableHighAccuracy: true
				});
		}, 10000);

	</script>
</body>
</html>
